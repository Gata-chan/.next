(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[796],{4178:function(e,s,l){Promise.resolve().then(l.bind(l,9301)),Promise.resolve().then(l.bind(l,3997))},9301:function(e,s,l){"use strict";l.r(s);var t=l(3827),a=l(6879),r=l(4419),n=l(5779),i=l(5900),d=l(1399),c=l(4090);s.default=function(e){let[s,l]=(0,c.useState)(!1),h=()=>l(!1),o=()=>l(!0);return(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Z,{type:"button",variant:"light",onClick:()=>o(),children:(0,t.jsx)(d.Fm7,{})}),(0,t.jsxs)(r.Z,{show:s,onHide:()=>h(),children:[(0,t.jsx)(r.Z.Header,{closeButton:!0,children:(0,t.jsx)("h3",{children:"Таблицы"})}),(0,t.jsx)(r.Z.Body,{children:(0,t.jsxs)(n.Z,{className:"flex-column",variant:"pills",defaultActiveKey:e.showtoggle,children:[(0,t.jsx)(n.Z.Item,{onClick:()=>h(),children:(0,t.jsx)(n.Z.Link,{href:"/timetable",children:(0,t.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[(0,t.jsx)(d.AeW,{className:"pt-1"}),(0,t.jsx)("p",{children:"РАСПИСАНИЕ"})]})})}),(0,t.jsx)(n.Z.Item,{onClick:()=>h(),children:(0,t.jsx)(n.Z.Link,{href:"/routetable",children:(0,t.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[(0,t.jsx)(d.nkz,{className:"pt-1"}),(0,t.jsx)("p",{children:"МАРШРУТЫ"})," "]})})}),(0,t.jsx)(n.Z.Item,{onClick:()=>h(),children:(0,t.jsx)(n.Z.Link,{href:"/crewtable",children:(0,t.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[(0,t.jsx)(d.rkU,{className:"pt-1"}),(0,t.jsx)("p",{children:"ЭКИПАЖИ"})," "]})})}),(0,t.jsx)(n.Z.Item,{onClick:()=>h(),children:(0,t.jsx)(n.Z.Link,{href:"/cartable",children:(0,t.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[(0,t.jsx)(d.BYR,{className:"pt-1"}),(0,t.jsx)("p",{children:"МАШИНЫ"})," "]})})}),(0,t.jsx)(n.Z.Item,{onClick:()=>h(),children:(0,t.jsx)(n.Z.Link,{href:"/drivertable",children:(0,t.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[(0,t.jsx)(d._hA,{className:"pt-1"}),(0,t.jsx)("p",{children:"ВОДИТЕЛИ"})," "]})})})]})})]})]})}},3997:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return j}});var t=l(3827),a=l(7907),r=l(4090),n=l(8826),i=l(6879),d=l(1399),c=l(4561),h=l(2636),o=function(e){let[s,l]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[x,j]=(0,r.useState)("");return(0,t.jsx)("div",{children:(0,t.jsxs)(c.Z,{show:e.show,onHide:e.handleClose,children:[(0,t.jsx)(c.Z.Header,{closeButton:!0,children:(0,t.jsx)(c.Z.Title,{children:(0,t.jsx)("p",{children:"Создать новую запись"})})}),(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите ID маршрута"}),(0,t.jsx)(h.Z.Control,{value:s,onChange:e=>l(e.target.value),type:"text"})]}),(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите ID Экипажа "}),(0,t.jsx)(h.Z.Control,{value:a,onChange:e=>n(e.target.value),type:"text"})]}),(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите Дату Отправления"}),(0,t.jsx)(h.Z.Control,{value:d,onChange:e=>o(e.target.value),type:"date"})]}),(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите Дату Приезда (если есть)"}),(0,t.jsx)(h.Z.Control,{value:x,onChange:e=>j(e.target.value),type:"date"})]})]})}),(0,t.jsxs)(c.Z.Footer,{children:[(0,t.jsx)(i.Z,{onClick:()=>void(e.formEmit(s,a,""===d?null:d,""===x?null:x),e.handleClose,j(""),n(""),o(""),l("")),variant:"success",children:"Отправить"}),(0,t.jsx)(i.Z,{onClick:e.handleClose,className:"btn btn-dark",children:"Отменить"})]})]})})},x=function(e){let[s,l]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),[d,o]=(0,r.useState)(""),[x,j]=(0,r.useState)("");var u=[{TimetableId:"",RouteId:"",CrewId:"",DepartDate:"",ArrivalDate:""}];return void 0!=e.TimetableObject[0].RouteId&&(u=e.TimetableObject),(0,t.jsx)("div",{children:(0,t.jsxs)(c.Z,{show:e.show,onHide:e.handleClose,children:[(0,t.jsx)(c.Z.Header,{closeButton:!0,children:(0,t.jsx)(c.Z.Title,{children:(0,t.jsx)("p",{children:"Изменить Запись ID: "})})}),(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите ID маршрута"}),(0,t.jsx)(h.Z.Control,{placeholder:e.TimetableObject==[]?"":"".concat(u[0].RouteId),value:s,onChange:e=>l(e.target.value),type:"text"})]}),(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите ID экипажа "}),(0,t.jsx)(h.Z.Control,{placeholder:e.TimetableObject==[]?"":"".concat(u[0].CrewId),value:a,onChange:e=>n(e.target.value),type:"text"})]}),(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите Дату Отправления "}),(0,t.jsx)(h.Z.Control,{placeholder:e.TimetableObject==[]?"":"".concat(u[0].DepartDate),value:d,onChange:e=>o(e.target.value),type:"date"})]}),(0,t.jsxs)(h.Z.Group,{children:[(0,t.jsx)(h.Z.Label,{children:"Введите Дату Приезда (если есть)"}),(0,t.jsx)(h.Z.Control,{placeholder:e.TimetableObject==[]?"":"".concat(u[0].ArrivalDate),value:x,onChange:e=>j(e.target.value),type:"date"})]})]})}),(0,t.jsxs)(c.Z.Footer,{children:[(0,t.jsx)(i.Z,{onClick:()=>{var t,r,i,c,h;return t=u[0].TimetableId,r=""==s?u[0].RouteId:s,i=""==a?u[0].CrewId:a,c=""==d?u[0].DepartDate:d,h=""==x?u[0].ArrivalDate:x,void(e.recieve([{TimetableId:t,RouteId:r,CrewId:i,DepartDate:""===c?null:c,ArrivalDate:""===h?null:h}]),e.handleClose(),j(""),n(""),o(""),l(""))},variant:"success",children:"Отправить"}),(0,t.jsx)(i.Z,{onClick:e.handleClose,className:"btn btn-dark",children:"Отменить"})]})]})})},j=function(e){let s=(0,a.useRouter)();var l=-1,[c,h]=(0,r.useState)([{TimetableId:"",RouteId:"",CrewId:"",DepartTime:"",ArrivalDate:""}]),j=e.data,u=e.Route,m=e.Driver,p=e.Car,Z=e.Crew;let[b,v]=(0,r.useState)(!1),f=()=>v(!1),C=()=>v(!0),[I,N]=(0,r.useState)(!1),D=(e,s,l,t,a)=>{h([{TimetableId:e,RouteId:s,CrewId:l,DepartTime:t,ArrivalDate:a}]),N(!0)};return(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,t.jsx)("thead",{className:"table-dark",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"ID Расписания"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"ID Маршрута"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"Откуда"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"Куда"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"ID Экипажа"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"Имя Водителя"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"Номер автомобиля"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"Дата отправления"})}),(0,t.jsx)("th",{children:(0,t.jsx)("p",{className:"fs-6",children:"Дата приезда"})}),(0,t.jsx)("th",{children:(0,t.jsx)(i.Z,{onClick:()=>C(),variant:"success",title:"Добавить",children:(0,t.jsx)(d.ymq,{})})})]})}),(0,t.jsx)("tbody",{children:j.map(a=>u[++l].map(r=>m[l].map(n=>p[l].map(c=>Z[l].map(l=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"fs-6",children:a.TimetableId}),(0,t.jsx)("td",{className:"fs-6",children:a.RouteId}),(0,t.jsx)("td",{className:"fs-6",children:r.From}),(0,t.jsx)("td",{className:"fs-6",children:r.To}),(0,t.jsx)("td",{className:"fs-6",children:l.CrewId}),(0,t.jsx)("td",{className:"fs-6",children:n.FullName}),(0,t.jsx)("td",{className:"fs-6",children:c.SerialPlate}),(0,t.jsx)("td",{className:"fs-6",children:null==a.DepartDate?"":a.DepartDate.toISOString().substring(0,10)}),(0,t.jsx)("td",{className:"fs-6",children:null==a.ArrivalDate?"":a.ArrivalDate.toISOString().substring(0,10)}),(0,t.jsxs)("td",{className:"d-flex",children:[(0,t.jsx)(i.Z,{onClick:()=>D(a.TimetableId,a.RouteId,l.CrewId,a.DepartDate,a.ArrivalDate),size:"sm",variant:"warning",title:"Редактировать",children:(0,t.jsx)(d.tU3,{})}),(0,t.jsx)(i.Z,{onClick:()=>{var l;return l=a.TimetableId,void(e.deleteTimetable(l),j=[],j=e.data,u=[],m=[],p=[],Z=[],u=e.Route,m=e.Driver,p=e.Car,Z=e.Crew,s.refresh())},size:"sm",variant:"danger",title:"Удалить",children:(0,t.jsx)(d.AMf,{})})]})]},a.TimetableId))))))})]}),(0,t.jsx)(o,{show:b,handleClose:f,formEmit:function(l,t,a,r){e.sendTimetable(l,t,a,r),f(),j=e.data,u=e.Route,m=e.Driver,p=e.Car,Z=e.Crew,s.refresh()}}),(0,t.jsx)(x,{show:I,handleClose:()=>N(!1),TimetableObject:c,recieve:function(l){e.updateTimetable(l[0].TimetableId,l),s.refresh()}})]})}}},function(e){e.O(0,[699,489,991,971,69,744],function(){return e(e.s=4178)}),_N_E=e.O()}]);