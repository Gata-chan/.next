(()=>{var e={};e.id=796,e.ids=[796],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},1194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>h,pages:()=>o,routeModule:()=>b,tree:()=>d});var a=r(482),s=r(9108),l=r(2563),n=r.n(l),i=r(8300),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let d=["",{children:["timetable",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,443)),"F:\\MyTerribleProjects\\_Code\\Cars-and-Drivers_TEST\\frontend-react\\src\\app\\timetable\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1965)),"F:\\MyTerribleProjects\\_Code\\Cars-and-Drivers_TEST\\frontend-react\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["F:\\MyTerribleProjects\\_Code\\Cars-and-Drivers_TEST\\frontend-react\\src\\app\\timetable\\page.js"],h="/timetable/page",u={require:r,loadChunk:()=>Promise.resolve()},b=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/timetable/page",pathname:"/timetable",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},453:(e,t,r)=>{let a={"17cbadc4d8c843b5048704a0431a9288ccc4d200":()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_13),"3e539221188f4ecac00076c8a9cce12d592ed50a":()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_11),"43657b48a806e067ec875c5b26bdb4de083b881c":()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_3),"6f1246a3ed4179b4741e50b7a93dc8c87e410657":()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_1),"8b434ca5bc7c67b61d4347dd833b614806a13d68":()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_9),c55140a31e7a17276635f6f7be3512d86b4be0bb:()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_5),dba111952b72d41b4d15968a2c9b3aa57c4149d2:()=>Promise.resolve().then(r.bind(r,443)).then(e=>e.$$ACTION_7)};async function s(e,...t){return(await a[e]()).apply(null,t)}e.exports={"17cbadc4d8c843b5048704a0431a9288ccc4d200":s.bind(null,"17cbadc4d8c843b5048704a0431a9288ccc4d200"),"3e539221188f4ecac00076c8a9cce12d592ed50a":s.bind(null,"3e539221188f4ecac00076c8a9cce12d592ed50a"),"43657b48a806e067ec875c5b26bdb4de083b881c":s.bind(null,"43657b48a806e067ec875c5b26bdb4de083b881c"),"6f1246a3ed4179b4741e50b7a93dc8c87e410657":s.bind(null,"6f1246a3ed4179b4741e50b7a93dc8c87e410657"),"8b434ca5bc7c67b61d4347dd833b614806a13d68":s.bind(null,"8b434ca5bc7c67b61d4347dd833b614806a13d68"),c55140a31e7a17276635f6f7be3512d86b4be0bb:s.bind(null,"c55140a31e7a17276635f6f7be3512d86b4be0bb"),dba111952b72d41b4d15968a2c9b3aa57c4149d2:s.bind(null,"dba111952b72d41b4d15968a2c9b3aa57c4149d2")}},9204:()=>{},7036:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},1066:(e,t,r)=>{Promise.resolve().then(r.bind(r,2115)),Promise.resolve().then(r.bind(r,2134))},2115:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5344),s=r(8154),l=r(3120),n=r(8832),i=r(2131),c=r(5739),d=r(3729);let o=function(e){let[t,r]=(0,d.useState)(!1),o=()=>r(!1),h=()=>r(!0);return(0,a.jsxs)("div",{children:[a.jsx(s.Z,{type:"button",variant:"light",onClick:()=>h(),children:a.jsx(c.Fm7,{})}),(0,a.jsxs)(l.Z,{show:t,onHide:()=>o(),children:[a.jsx(l.Z.Header,{closeButton:!0,children:a.jsx("h3",{children:"Таблицы"})}),a.jsx(l.Z.Body,{children:(0,a.jsxs)(n.Z,{className:"flex-column",variant:"pills",defaultActiveKey:e.showtoggle,children:[a.jsx(n.Z.Item,{onClick:()=>o(),children:a.jsx(n.Z.Link,{href:"/timetable",children:(0,a.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[a.jsx(c.AeW,{className:"pt-1"}),a.jsx("p",{children:"РАСПИСАНИЕ"})]})})}),a.jsx(n.Z.Item,{onClick:()=>o(),children:a.jsx(n.Z.Link,{href:"/routetable",children:(0,a.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[a.jsx(c.nkz,{className:"pt-1"}),a.jsx("p",{children:"МАРШРУТЫ"})," "]})})}),a.jsx(n.Z.Item,{onClick:()=>o(),children:a.jsx(n.Z.Link,{href:"/crewtable",children:(0,a.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[a.jsx(c.rkU,{className:"pt-1"}),a.jsx("p",{children:"ЭКИПАЖИ"})," "]})})}),a.jsx(n.Z.Item,{onClick:()=>o(),children:a.jsx(n.Z.Link,{href:"/cartable",children:(0,a.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[a.jsx(c.BYR,{className:"pt-1"}),a.jsx("p",{children:"МАШИНЫ"})," "]})})}),a.jsx(n.Z.Item,{onClick:()=>o(),children:a.jsx(n.Z.Link,{href:"/drivertable",children:(0,a.jsxs)(i.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[a.jsx(c._hA,{className:"pt-1"}),a.jsx("p",{children:"ВОДИТЕЛИ"})," "]})})})]})})]})]})}},2134:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5344),s=r(8428),l=r(3729),n=r(5544),i=r(8154),c=r(5739),d=r(8453),o=r(8104);let h=function(e){let[t,r]=(0,l.useState)(""),[s,n]=(0,l.useState)(""),[c,h]=(0,l.useState)(""),[u,b]=(0,l.useState)("");return a.jsx("div",{children:(0,a.jsxs)(d.Z,{show:e.show,onHide:e.handleClose,children:[a.jsx(d.Z.Header,{closeButton:!0,children:a.jsx(d.Z.Title,{children:a.jsx("p",{children:"Создать новую запись"})})}),a.jsx(d.Z.Body,{children:(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите ID маршрута"}),a.jsx(o.Z.Control,{value:t,onChange:e=>r(e.target.value),type:"text"})]}),(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите ID Экипажа "}),a.jsx(o.Z.Control,{value:s,onChange:e=>n(e.target.value),type:"text"})]}),(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите Дату Отправления"}),a.jsx(o.Z.Control,{value:c,onChange:e=>h(e.target.value),type:"date"})]}),(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите Дату Приезда (если есть)"}),a.jsx(o.Z.Control,{value:u,onChange:e=>b(e.target.value),type:"date"})]})]})}),(0,a.jsxs)(d.Z.Footer,{children:[a.jsx(i.Z,{onClick:()=>void(e.formEmit(t,s,""===c?null:c,""===u?null:u),e.handleClose,b(""),n(""),h(""),r("")),variant:"success",children:"Отправить"}),a.jsx(i.Z,{onClick:e.handleClose,className:"btn btn-dark",children:"Отменить"})]})]})})},u=function(e){let[t,r]=(0,l.useState)(""),[s,n]=(0,l.useState)(""),[c,h]=(0,l.useState)(""),[u,b]=(0,l.useState)("");var x=[{TimetableId:"",RouteId:"",CrewId:"",DepartDate:"",ArrivalDate:""}];return void 0!=e.TimetableObject[0].RouteId&&(x=e.TimetableObject),a.jsx("div",{children:(0,a.jsxs)(d.Z,{show:e.show,onHide:e.handleClose,children:[a.jsx(d.Z.Header,{closeButton:!0,children:a.jsx(d.Z.Title,{children:a.jsx("p",{children:"Изменить Запись ID: "})})}),a.jsx(d.Z.Body,{children:(0,a.jsxs)(o.Z,{children:[(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите ID маршрута"}),a.jsx(o.Z.Control,{placeholder:e.TimetableObject==[]?"":`${x[0].RouteId}`,value:t,onChange:e=>r(e.target.value),type:"text"})]}),(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите ID экипажа "}),a.jsx(o.Z.Control,{placeholder:e.TimetableObject==[]?"":`${x[0].CrewId}`,value:s,onChange:e=>n(e.target.value),type:"text"})]}),(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите Дату Отправления "}),a.jsx(o.Z.Control,{placeholder:e.TimetableObject==[]?"":`${x[0].DepartDate}`,value:c,onChange:e=>h(e.target.value),type:"date"})]}),(0,a.jsxs)(o.Z.Group,{children:[a.jsx(o.Z.Label,{children:"Введите Дату Приезда (если есть)"}),a.jsx(o.Z.Control,{placeholder:e.TimetableObject==[]?"":`${x[0].ArrivalDate}`,value:u,onChange:e=>b(e.target.value),type:"date"})]})]})}),(0,a.jsxs)(d.Z.Footer,{children:[a.jsx(i.Z,{onClick:()=>{var a,l,i,d,o;return a=x[0].TimetableId,l=""==t?x[0].RouteId:t,i=""==s?x[0].CrewId:s,d=""==c?x[0].DepartDate:c,o=""==u?x[0].ArrivalDate:u,void(e.recieve([{TimetableId:a,RouteId:l,CrewId:i,DepartDate:""===d?null:d,ArrivalDate:""===o?null:o}]),e.handleClose(),b(""),n(""),h(""),r(""))},variant:"success",children:"Отправить"}),a.jsx(i.Z,{onClick:e.handleClose,className:"btn btn-dark",children:"Отменить"})]})]})})},b=function(e){let t=(0,s.useRouter)();var r=-1,[d,o]=(0,l.useState)([{TimetableId:"",RouteId:"",CrewId:"",DepartTime:"",ArrivalDate:""}]),b=e.data,x=e.Route,p=e.Driver,j=e.Car,m=e.Crew;let[f,v]=(0,l.useState)(!1),C=()=>v(!1),I=()=>v(!0),[w,g]=(0,l.useState)(!1),T=(e,t,r,a,s)=>{o([{TimetableId:e,RouteId:t,CrewId:r,DepartTime:a,ArrivalDate:s}]),g(!0)};return(0,a.jsxs)("div",{children:[(0,a.jsxs)(n.Z,{striped:!0,bordered:!0,hover:!0,children:[a.jsx("thead",{className:"table-dark",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"ID Расписания"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"ID Маршрута"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"Откуда"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"Куда"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"ID Экипажа"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"Имя Водителя"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"Номер автомобиля"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"Дата отправления"})}),a.jsx("th",{children:a.jsx("p",{className:"fs-6",children:"Дата приезда"})}),a.jsx("th",{children:a.jsx(i.Z,{onClick:()=>I(),variant:"success",title:"Добавить",children:a.jsx(c.ymq,{})})})]})}),a.jsx("tbody",{children:b.map(s=>x[++r].map(l=>p[r].map(n=>j[r].map(d=>m[r].map(r=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"fs-6",children:s.TimetableId}),a.jsx("td",{className:"fs-6",children:s.RouteId}),a.jsx("td",{className:"fs-6",children:l.From}),a.jsx("td",{className:"fs-6",children:l.To}),a.jsx("td",{className:"fs-6",children:r.CrewId}),a.jsx("td",{className:"fs-6",children:n.FullName}),a.jsx("td",{className:"fs-6",children:d.SerialPlate}),a.jsx("td",{className:"fs-6",children:null==s.DepartDate?"":s.DepartDate.toISOString().substring(0,10)}),a.jsx("td",{className:"fs-6",children:null==s.ArrivalDate?"":s.ArrivalDate.toISOString().substring(0,10)}),(0,a.jsxs)("td",{className:"d-flex",children:[a.jsx(i.Z,{onClick:()=>T(s.TimetableId,s.RouteId,r.CrewId,s.DepartDate,s.ArrivalDate),size:"sm",variant:"warning",title:"Редактировать",children:a.jsx(c.tU3,{})}),a.jsx(i.Z,{onClick:()=>{var r;return r=s.TimetableId,void(e.deleteTimetable(r),b=[],b=e.data,x=[],p=[],j=[],m=[],x=e.Route,p=e.Driver,j=e.Car,m=e.Crew,t.refresh())},size:"sm",variant:"danger",title:"Удалить",children:a.jsx(c.AMf,{})})]})]},s.TimetableId))))))})]}),a.jsx(h,{show:f,handleClose:C,formEmit:function(r,a,s,l){e.sendTimetable(r,a,s,l),C(),b=e.data,x=e.Route,p=e.Driver,j=e.Car,m=e.Crew,t.refresh()}}),a.jsx(u,{show:w,handleClose:()=>g(!1),TimetableObject:d,recieve:function(r){e.updateTimetable(r[0].TimetableId,r),t.refresh()}})]})}},5050:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});let a=(0,r(6843).createProxy)(String.raw`F:\MyTerribleProjects\_Code\Cars-and-Drivers_TEST\frontend-react\src\app\components\NavigationSidebar.js`),{__esModule:s,$$typeof:l}=a,n=a.default},8390:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});let a=(0,r(6843).createProxy)(String.raw`F:\MyTerribleProjects\_Code\Cars-and-Drivers_TEST\frontend-react\src\app\components\TableTimetable.js`),{__esModule:s,$$typeof:l}=a,n=a.default},1965:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>s});var a=r(5036);r(1886);let s={title:"Test for UdmurtOil",description:"Done by Alina Erch"};function l({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:e})})}},443:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{$$ACTION_1:()=>x,$$ACTION_11:()=>v,$$ACTION_13:()=>C,$$ACTION_3:()=>p,$$ACTION_5:()=>j,$$ACTION_7:()=>m,$$ACTION_9:()=>f,default:()=>N});var s=r(5036),l=r(4471);r(8616),r(2);var n=r(5050),i=r(8390),c=r(2479),d=[],o=[],h=[],u=[],b=[];let e=async()=>{try{let e=await c.Z.connect(),t=(await e.query('SELECT * FROM public."Timetable" ORDER BY "TimetableId" ASC ')).rows;return e.release(),t}catch(e){throw console.error("Error fetching:",e),e}},I=(0,l.U)("6f1246a3ed4179b4741e50b7a93dc8c87e410657",x);async function x(e){try{let t=await c.Z.connect(),r=(await t.query(`SELECT * FROM public."Routes" WHERE "RouteId" IN (${e})`)).rows;return t.release(),r}catch(e){throw console.error("Error fetching:",e),e}}let w=(0,l.U)("43657b48a806e067ec875c5b26bdb4de083b881c",p);async function p(e){try{let t=await c.Z.connect(),r=(await t.query(`SELECT * FROM public."Crews" WHERE "CrewId" IN (${e})`)).rows;return t.release(),r}catch(e){throw console.error("Error fetching:",e),e}}let g=(0,l.U)("c55140a31e7a17276635f6f7be3512d86b4be0bb",j);async function j(e){try{let t=await c.Z.connect(),r=(await t.query(`SELECT * FROM public."Drivers" WHERE "DriverId" IN (${e})`)).rows;return t.release(),r}catch(e){throw console.error("Error fetching:",e),e}}let T=(0,l.U)("dba111952b72d41b4d15968a2c9b3aa57c4149d2",m);async function m(e){try{let t=await c.Z.connect(),r=(await t.query(`SELECT * FROM public."Cars" WHERE "CarId" IN (${e})`)).rows;return t.release(),r}catch(e){throw console.error("Error fetching:",e),e}}let Z=(0,l.U)("8b434ca5bc7c67b61d4347dd833b614806a13d68",f);async function f(t,r,a,s){try{var l=`'${a}'`,n=`'${s}'`;let i=await c.Z.connect();await i.query(`INSERT INTO public."Timetable" (
        "RouteId", "CrewId", "DepartDate", "ArrivalDate") 
        VALUES ('${t}'::integer, '${r}'::integer, 
        ${null==a?null:l}::date, ${null==s?null:n}::date)`),i.release(),await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)}),o=[],h=[],u=[],b=[];for(let e=0;e<d.length;e++)o.push(await w(d[e].CrewId)),h.push(await I(d[e].RouteId));for(let e=0;e<o.length;e++)u.push(await g(o[e][0].DriverId)),b.push(await T(o[e][0].CarId))}catch(e){console.error(e)}}let D=(0,l.U)("3e539221188f4ecac00076c8a9cce12d592ed50a",v);async function v(t,r){try{var a=`'${r[0].DepartDate}'`,s=`'${r[0].ArrivalDate}'`;let l=await c.Z.connect();await l.query(`UPDATE public."Timetable" SET
      "RouteId" = '${r[0].RouteId}'::integer, "CrewId" = '${r[0].CrewId}'::integer, 
      "DepartDate" = ${null==r[0].DepartDate?null:a}::date, 
      "ArrivalDate" = ${null==r[0].ArrivalDate?null:s}::date
      WHERE "TimetableId" = ${t};`),d=[],await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)}),o=[],h=[],u=[],b=[];for(let e=0;e<d.length;e++)o.push(await w(d[e].CrewId)),h.push(await I(d[e].RouteId));for(let e=0;e<o.length;e++)u.push(await g(o[e][0].DriverId)),b.push(await T(o[e][0].CarId));l.release()}catch(e){console.error(e)}}let y=(0,l.U)("17cbadc4d8c843b5048704a0431a9288ccc4d200",C);async function C(t){try{let r=await c.Z.connect();await r.query(`DELETE FROM public."Timetable" WHERE "TimetableId" IN (${t});`),d=[],await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)}),r.release(),o=[],h=[],u=[],b=[];for(let e=0;e<d.length;e++)o.push(await w(d[e].CrewId)),h.push(await I(d[e].RouteId));for(let e=0;e<o.length;e++)u.push(await g(o[e][0].DriverId)),b.push(await T(o[e][0].CarId))}catch(e){console.error(e)}}await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)});for(let e=0;e<d.length;e++)o.push(await w(d[e].CrewId)),h.push(await I(d[e].RouteId));for(let e=0;e<o.length;e++)u.push(await g(o[e][0].DriverId)),b.push(await T(o[e][0].CarId));let N=function(){return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"d-flex flex-row",children:[s.jsx(n.ZP,{showtoggle:"/timetable"}),s.jsx("h2",{className:"mt-2",children:"Расписание"})]}),s.jsx("div",{children:s.jsx(i.ZP,{updateTimetable:D,deleteTimetable:y,sendTimetable:Z,data:d,Crew:o,Route:h,Driver:u,Car:b})})]})};a()}catch(e){a(e)}},1)},2479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=new(require("pg")).Pool({host:process.env.PG_HOST,port:process.env.PG_PORT,user:process.env.PG_USER,password:process.env.PG_PASSWORD,database:process.env.PG_DATABASE})},592:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(337);let s=e=>[{type:"image/x-icon",sizes:"50x50",url:(0,a.fillMetadataSegment)(".",e.params,"icon.ico")+"?8370de166f20dc40"}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,141,90,517],()=>r(1194));module.exports=a})();