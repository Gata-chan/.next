(()=>{var e={};e.id=181,e.ids=[181],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},2806:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>o,routeModule:()=>b,tree:()=>d});var s=t(482),n=t(9108),a=t(2563),i=t.n(a),c=t(8300),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);t.d(r,l);let d=["",{children:["crewtable",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7577)),"F:\\MyTerribleProjects\\_Code\\Cars-and-Drivers_TEST\\frontend-react\\src\\app\\crewtable\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1965)),"F:\\MyTerribleProjects\\_Code\\Cars-and-Drivers_TEST\\frontend-react\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,592))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["F:\\MyTerribleProjects\\_Code\\Cars-and-Drivers_TEST\\frontend-react\\src\\app\\crewtable\\page.js"],h="/crewtable/page",x={require:t,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/crewtable/page",pathname:"/crewtable",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8228:(e,r,t)=>{let s={"0265ab8c645dcd33c093c5ee7775cd711e0b3b2a":()=>Promise.resolve().then(t.bind(t,7577)).then(e=>e.$$ACTION_9),"048a990be15dd0c0dd175a0ccc547fe313b7d6cf":()=>Promise.resolve().then(t.bind(t,7577)).then(e=>e.$$ACTION_5),"265c3c9e9b39be0afa3c969dbb6b64a0dab5e5b9":()=>Promise.resolve().then(t.bind(t,7577)).then(e=>e.$$ACTION_7),"4e2016b355ecfbf8e57c908577f3c607b2ee74c5":()=>Promise.resolve().then(t.bind(t,7577)).then(e=>e.$$ACTION_3),ec6b630319ee418f964d7a7eb35f03b6f8718062:()=>Promise.resolve().then(t.bind(t,7577)).then(e=>e.$$ACTION_1)};async function n(e,...r){return(await s[e]()).apply(null,r)}e.exports={"0265ab8c645dcd33c093c5ee7775cd711e0b3b2a":n.bind(null,"0265ab8c645dcd33c093c5ee7775cd711e0b3b2a"),"048a990be15dd0c0dd175a0ccc547fe313b7d6cf":n.bind(null,"048a990be15dd0c0dd175a0ccc547fe313b7d6cf"),"265c3c9e9b39be0afa3c969dbb6b64a0dab5e5b9":n.bind(null,"265c3c9e9b39be0afa3c969dbb6b64a0dab5e5b9"),"4e2016b355ecfbf8e57c908577f3c607b2ee74c5":n.bind(null,"4e2016b355ecfbf8e57c908577f3c607b2ee74c5"),ec6b630319ee418f964d7a7eb35f03b6f8718062:n.bind(null,"ec6b630319ee418f964d7a7eb35f03b6f8718062")}},9204:()=>{},7036:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},6927:(e,r,t)=>{Promise.resolve().then(t.bind(t,2115)),Promise.resolve().then(t.bind(t,4014))},2115:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var s=t(5344),n=t(8154),a=t(3120),i=t(8832),c=t(2131),l=t(5739),d=t(3729);let o=function(e){let[r,t]=(0,d.useState)(!1),o=()=>t(!1),h=()=>t(!0);return(0,s.jsxs)("div",{children:[s.jsx(n.Z,{type:"button",variant:"light",onClick:()=>h(),children:s.jsx(l.Fm7,{})}),(0,s.jsxs)(a.Z,{show:r,onHide:()=>o(),children:[s.jsx(a.Z.Header,{closeButton:!0,children:s.jsx("h3",{children:"Таблицы"})}),s.jsx(a.Z.Body,{children:(0,s.jsxs)(i.Z,{className:"flex-column",variant:"pills",defaultActiveKey:e.showtoggle,children:[s.jsx(i.Z.Item,{onClick:()=>o(),children:s.jsx(i.Z.Link,{href:"/timetable",children:(0,s.jsxs)(c.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[s.jsx(l.AeW,{className:"pt-1"}),s.jsx("p",{children:"РАСПИСАНИЕ"})]})})}),s.jsx(i.Z.Item,{onClick:()=>o(),children:s.jsx(i.Z.Link,{href:"/routetable",children:(0,s.jsxs)(c.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[s.jsx(l.nkz,{className:"pt-1"}),s.jsx("p",{children:"МАРШРУТЫ"})," "]})})}),s.jsx(i.Z.Item,{onClick:()=>o(),children:s.jsx(i.Z.Link,{href:"/crewtable",children:(0,s.jsxs)(c.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[s.jsx(l.rkU,{className:"pt-1"}),s.jsx("p",{children:"ЭКИПАЖИ"})," "]})})}),s.jsx(i.Z.Item,{onClick:()=>o(),children:s.jsx(i.Z.Link,{href:"/cartable",children:(0,s.jsxs)(c.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[s.jsx(l.BYR,{className:"pt-1"}),s.jsx("p",{children:"МАШИНЫ"})," "]})})}),s.jsx(i.Z.Item,{onClick:()=>o(),children:s.jsx(i.Z.Link,{href:"/drivertable",children:(0,s.jsxs)(c.Z,{className:"d-flex align-items-baseline",direction:"horizontal",gap:1,children:[s.jsx(l._hA,{className:"pt-1"}),s.jsx("p",{children:"ВОДИТЕЛИ"})," "]})})})]})})]})]})}},4014:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>b});var s=t(5344),n=t(3729),a=t(5544),i=t(8154),c=t(5739),l=t(8453),d=t(8104);let o=function(e){let[r,t]=(0,n.useState)(""),[a,c]=(0,n.useState)("");return s.jsx("div",{children:(0,s.jsxs)(l.Z,{show:e.show,onHide:e.handleClose,children:[s.jsx(l.Z.Header,{closeButton:!0,children:s.jsx(l.Z.Title,{children:s.jsx("p",{children:"Создать новую запись"})})}),s.jsx(l.Z.Body,{children:(0,s.jsxs)(d.Z,{children:[(0,s.jsxs)(d.Z.Group,{children:[s.jsx(d.Z.Label,{children:"Введите ID автомобиля (Только Цифры)"}),s.jsx(d.Z.Control,{value:a,onChange:e=>c(e.target.value),type:"text"})]}),(0,s.jsxs)(d.Z.Group,{children:[s.jsx(d.Z.Label,{children:"Введите ID водителя (Только Цифры)"}),s.jsx(d.Z.Control,{value:r,onChange:e=>t(e.target.value),type:"text"})]})]})}),(0,s.jsxs)(l.Z.Footer,{children:[s.jsx(i.Z,{onClick:()=>{e.formEmit(a,r),e.handleClose(),t(""),c("")},variant:"success",children:"Отправить"}),s.jsx(i.Z,{onClick:e.handleClose,className:"btn btn-dark",children:"Отменить"})]})]})})};var h=t(8428);let x=function(e){let[r,t]=(0,n.useState)(""),[a,c]=(0,n.useState)("");var o=[{CrewId:"",CarId:"",DriverId:""}];return void 0!=e.CrewObject[0].CarId&&(o=e.CrewObject),s.jsx("div",{children:(0,s.jsxs)(l.Z,{show:e.show,onHide:e.handleClose,children:[s.jsx(l.Z.Header,{closeButton:!0,children:s.jsx(l.Z.Title,{children:s.jsx("p",{children:"Изменить Запись ID: "})})}),s.jsx(l.Z.Body,{children:(0,s.jsxs)(d.Z,{children:[(0,s.jsxs)(d.Z.Group,{children:[s.jsx(d.Z.Label,{children:"Введите ID автомобиля"}),s.jsx(d.Z.Control,{placeholder:e.CrewObject==[]?"":`${o[0].CarId}`,value:r,onChange:e=>t(e.target.value),type:"text"})]}),(0,s.jsxs)(d.Z.Group,{children:[s.jsx(d.Z.Label,{children:"Введите ID водителя "}),s.jsx(d.Z.Control,{placeholder:e.CrewObject==[]?"":`${o[0].DriverId}`,value:a,onChange:e=>c(e.target.value),type:"text"})]})]})}),(0,s.jsxs)(l.Z.Footer,{children:[s.jsx(i.Z,{onClick:()=>{var s,n,i;return s=o[0].CrewId,n=""==r?o[0].CarId:r,i=""==a?o[0].DriverId:a,void(e.recieve([{CrewId:s,CarId:n,DriverId:i}]),e.handleClose(),t(""),c(""))},variant:"success",children:"Отправить"}),s.jsx(i.Z,{onClick:e.handleClose,className:"btn btn-dark",children:"Отменить"})]})]})})},b=function(e){let r=(0,h.useRouter)();var t=-1,l=e.data,[d,b]=(0,n.useState)([{CrewId:"",CarId:"",DriverId:""}]),u=e.Driver,j=e.Car;let[p,f]=(0,n.useState)(!1),C=()=>f(!1),v=()=>f(!0),[m,w]=(0,n.useState)(!1),I=(e,r,t)=>{b([{CrewId:e,CarId:r,DriverId:t}]),w(!0)};return(0,s.jsxs)("div",{children:[(0,s.jsxs)(a.Z,{striped:!0,bordered:!0,hover:!0,children:[s.jsx("thead",{className:"table-dark",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:s.jsx("p",{children:"ID экипажа"})}),s.jsx("th",{children:s.jsx("p",{children:"ID автомобиля"})}),s.jsx("th",{children:s.jsx("p",{children:"Брэнд автомобиля"})}),s.jsx("th",{children:s.jsx("p",{children:"Номер автомобиля"})}),s.jsx("th",{children:s.jsx("p",{children:"ID водителя"})}),s.jsx("th",{children:s.jsx("p",{children:"Имя Водителя"})}),s.jsx("th",{children:s.jsx("p",{children:"Номер Телефона Водителя"})}),s.jsx("th",{children:s.jsx(i.Z,{onClick:()=>v(),variant:"success",title:"Добавить",children:s.jsx(c.ymq,{})})})]})}),s.jsx("tbody",{children:l.map(n=>j[++t].map(a=>u[t].map(t=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:n.CrewId}),s.jsx("td",{children:n.CarId}),s.jsx("td",{children:a.Brand}),s.jsx("td",{children:a.SerialPlate}),s.jsx("td",{children:n.DriverId}),s.jsx("td",{children:t.FullName}),s.jsx("td",{children:t.PhoneNumber}),(0,s.jsxs)("td",{className:"d-flex",children:[s.jsx(i.Z,{onClick:()=>I(n.CrewId,n.CarId,n.DriverId),size:"sm",variant:"warning",title:"Редактировать",children:s.jsx(c.tU3,{})}),s.jsx(i.Z,{onClick:()=>{var t;return t=n.CrewId,void(e.deleteCrew(t),l=[],l=e.data,r.refresh())},size:"sm",variant:"danger",title:"Удалить",children:s.jsx(c.AMf,{})})]})]},n.CrewId))))})]}),s.jsx(o,{show:p,handleClose:C,formEmit:function(t,s){e.sendCrew(t,s),C(),l=e.data,r.refresh()}}),s.jsx(x,{show:m,handleClose:()=>w(!1),CrewObject:d,recieve:function(t){e.updateCrew(t[0].CrewId,t),l=[],l=e.data,u=[],u=e.Driver,j=[],j=e.Car,r.refresh()}})]})}},5050:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>i});let s=(0,t(6843).createProxy)(String.raw`F:\MyTerribleProjects\_Code\Cars-and-Drivers_TEST\frontend-react\src\app\components\NavigationSidebar.js`),{__esModule:n,$$typeof:a}=s,i=s.default},5077:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>i});let s=(0,t(6843).createProxy)(String.raw`F:\MyTerribleProjects\_Code\Cars-and-Drivers_TEST\frontend-react\src\app\components\TableCrews.js`),{__esModule:n,$$typeof:a}=s,i=s.default},7577:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{$$ACTION_1:()=>x,$$ACTION_3:()=>b,$$ACTION_5:()=>u,$$ACTION_7:()=>j,$$ACTION_9:()=>p,default:()=>I});var n=t(5036),a=t(4471);t(8616),t(2);var i=t(5050),c=t(5077),l=t(2479),d=[],o=[],h=[];let e=async()=>{try{let e=await l.Z.connect(),r=(await e.query('SELECT * FROM public."Crews" ORDER BY "CrewId" ASC ')).rows;return e.release(),r}catch(e){throw console.error("Error fetching:",e),e}},f=(0,a.U)("ec6b630319ee418f964d7a7eb35f03b6f8718062",x);async function x(e){try{let r=await l.Z.connect(),t=(await r.query(`SELECT * FROM public."Cars" WHERE "CarId" IN (${e})`)).rows;return r.release(),t}catch(e){throw console.error("Error fetching:",e),e}}let C=(0,a.U)("4e2016b355ecfbf8e57c908577f3c607b2ee74c5",b);async function b(e){try{let r=await l.Z.connect(),t=(await r.query(`SELECT * FROM public."Drivers" WHERE "DriverId" IN (${e})`)).rows;return r.release(),t}catch(e){throw console.error("Error fetching:",e),e}}let v=(0,a.U)("048a990be15dd0c0dd175a0ccc547fe313b7d6cf",u);async function u(r,t){try{let s=await l.Z.connect();await s.query(`INSERT INTO public."Crews" (
        "CarId", "DriverId") 
        VALUES ('${r}'::integer, '${t}'::integer)`),s.release(),d=[],h=[],o=[],await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)});for(let e=0;e<d.length;e++)o.push(await C(d[e].DriverId)),h.push(await f(d[e].CarId))}catch(e){console.error(e)}}let m=(0,a.U)("265c3c9e9b39be0afa3c969dbb6b64a0dab5e5b9",j);async function j(r){try{let t=await l.Z.connect();await t.query(`DELETE FROM public."Crews" WHERE "CrewId" IN (${r});`),d=[],h=[],o=[],await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)});for(let e=0;e<d.length;e++)o.push(await C(d[e].DriverId)),h.push(await f(d[e].CarId));t.release()}catch(e){console.error(e)}}let w=(0,a.U)("0265ab8c645dcd33c093c5ee7775cd711e0b3b2a",p);async function p(r,t){try{let s=await l.Z.connect();await s.query(`UPDATE public."Crews" SET
          "CarId" = '${t[0].CarId}'::integer, "DriverId" = '${t[0].DriverId}'::integer
          WHERE "CrewId" = ${r};`),d=[],h=[],o=[],await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)});for(let e=0;e<d.length;e++)o.push(await C(d[e].DriverId)),h.push(await f(d[e].CarId));s.release()}catch(e){console.error(e)}}await e().then(e=>{Object.assign(d,e)}).catch(e=>{console.error("Error fetching:",e)});for(let e=0;e<d.length;e++)o.push(await C(d[e].DriverId)),h.push(await f(d[e].CarId));let I=function(){return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"d-flex flex-row",children:[n.jsx(i.ZP,{showtoggle:"/crewtable"}),n.jsx("h2",{className:"mt-2",children:"Экипажи"})]}),n.jsx("div",{children:n.jsx(c.ZP,{data:d,Car:h,Driver:o,sendCrew:v,deleteCrew:m,updateCrew:w})})]})};s()}catch(e){s(e)}},1)},1965:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a,metadata:()=>n});var s=t(5036);t(1886);let n={title:"Test for UdmurtOil",description:"Done by Alina Erch"};function a({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{children:e})})}},2479:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});let s=new(require("pg")).Pool({host:process.env.PG_HOST,port:process.env.PG_PORT,user:process.env.PG_USER,password:process.env.PG_PASSWORD,database:process.env.PG_DATABASE})},592:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});var s=t(337);let n=e=>[{type:"image/x-icon",sizes:"50x50",url:(0,s.fillMetadataSegment)(".",e.params,"icon.ico")+"?8370de166f20dc40"}]}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,141,90,517],()=>t(2806));module.exports=s})();